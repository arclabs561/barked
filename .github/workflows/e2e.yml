name: e2e

on:
  push:
  pull_request:

jobs:
  linux:
    name: linux (bash)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: E2E smoke
        shell: bash
        run: |
          chmod +x tests/e2e/linux-e2e.sh
          ./tests/e2e/linux-e2e.sh

  macos:
    name: macos (homebrew bash)
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Bash 5
        shell: bash
        run: |
          brew install bash
      - name: E2E smoke
        shell: bash
        run: |
          chmod +x tests/e2e/macos-e2e.sh
          ./tests/e2e/macos-e2e.sh

  windows:
    name: windows (powershell)
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v4
      - name: E2E smoke
        shell: pwsh
        run: |
          ./tests/e2e/windows-e2e.ps1

